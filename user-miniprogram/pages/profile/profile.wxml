<view class="container">
  <!-- 用户信息 -->
  <view class="user-header" wx:if="{{isLoggedIn && memberInfo}}">
    <image class="user-avatar" src="{{memberInfo.avatar || '/assets/images/avatar-default.png'}}" mode="aspectFill"></image>
    <view class="user-info">
      <text class="user-name">{{memberInfo.nickname || '用户'}}</text>
      <view class="user-level" wx:if="{{memberInfo.level_name}}">
        <text class="level-tag">{{memberInfo.level_name}}</text>
      </view>
    </view>
  </view>

  <!-- 未登录状态 -->
  <view class="user-header guest" wx:else bindtap="goToLogin">
    <image class="user-avatar" src="/assets/images/avatar-default.png" mode="aspectFill"></image>
    <view class="user-info">
      <text class="login-text">点击登录</text>
      <text class="login-hint">登录后享受更多服务</text>
    </view>
  </view>

  <!-- 资产信息 -->
  <view class="asset-card" wx:if="{{isLoggedIn}}">
    <view class="asset-item" bindtap="goToWallet">
      <text class="asset-value">{{memberInfo.coin_balance || 0}}</text>
      <text class="asset-label">金币</text>
    </view>
    <view class="asset-divider"></view>
    <view class="asset-item" bindtap="goToWallet">
      <text class="asset-value">{{memberInfo.point_balance || 0}}</text>
      <text class="asset-label">积分</text>
    </view>
    <view class="asset-divider"></view>
    <view class="asset-item" bindtap="goToRecharge">
      <text class="asset-value recharge-btn">充值</text>
      <text class="asset-label">金币充值</text>
    </view>
  </view>

  <!-- 教练入口 -->
  <view class="coach-entry-card" wx:if="{{isLoggedIn}}" bindtap="goToCoachCenter">
    <view class="coach-entry-left">
      <image class="coach-entry-icon" src="/assets/icons/coach-entry.png" mode="aspectFit"></image>
      <view class="coach-entry-info">
        <text class="coach-entry-title">教练中心</text>
        <text class="coach-entry-desc">{{isCoach ? '管理您的课程和预约' : '申请成为教练'}}</text>
      </view>
    </view>
    <text class="coach-entry-arrow">></text>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-card">
    <view
      class="menu-item"
      wx:for="{{menus}}"
      wx:key="text"
      bindtap="onMenuTap"
      data-url="{{item.url}}"
    >
      <image class="menu-icon" src="{{item.icon}}" mode="aspectFit"></image>
      <text class="menu-text">{{item.text}}</text>
      <text class="menu-arrow">></text>
    </view>
  </view>

  <!-- 工具菜单 -->
  <view class="menu-card">
    <view
      class="menu-item"
      wx:for="{{tools}}"
      wx:key="text"
      bindtap="onToolTap"
      data-action="{{item.action}}"
      data-url="{{item.url}}"
    >
      <image class="menu-icon" src="{{item.icon}}" mode="aspectFit"></image>
      <text class="menu-text">{{item.text}}</text>
      <text class="menu-arrow">></text>
    </view>
  </view>
</view>

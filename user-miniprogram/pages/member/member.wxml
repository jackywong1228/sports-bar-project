<view class="container">
  <!-- 当前会员信息 -->
  <view class="header">
    <view class="level-info">
      <text class="level">{{memberInfo.level_name || '普通会员'}}</text>
      <text class="expire" wx:if="{{memberInfo.level_code !== 'TRIAL' && memberInfo.member_expire_time}}">有效期至：{{memberInfo.member_expire_time}}</text>
      <text class="expire" wx:elif="{{memberInfo.level_code !== 'TRIAL'}}">长期有效</text>
      <text class="expire" wx:else>暂未开通会员</text>
    </view>
  </view>

  <!-- 已付费会员权益 -->
  <view class="section" wx:if="{{memberInfo.level_code !== 'TRIAL'}}">
    <view class="title">我的会员权益</view>
    <view class="benefits-grid">
      <view class="benefit-item">
        <text class="benefit-value">{{benefits.advanceDays}}天</text>
        <text class="benefit-label">提前预约</text>
      </view>
      <view class="benefit-item">
        <text class="benefit-value">{{benefits.dailyLimit}}</text>
        <text class="benefit-label">每日预约</text>
      </view>
      <view class="benefit-item">
        <text class="benefit-value">{{benefits.concurrent}}个</text>
        <text class="benefit-label">同时预约</text>
      </view>
      <view class="benefit-item">
        <text class="benefit-value">{{benefits.discount}}</text>
        <text class="benefit-label">餐食折扣</text>
      </view>
    </view>
  </view>

  <!-- 会员卡套餐列表 -->
  <view class="section">
    <view class="title">{{memberInfo.level_code !== 'TRIAL' ? '续费/升级会员' : '开通/续费会员'}}</view>
    <view class="card-list">
      <view class="card {{item.is_recommended ? 'recommended' : ''}}" wx:for="{{cards}}" wx:key="id" bindtap="buyCard" data-id="{{item.id}}">
        <view class="card-badge" wx:if="{{item.is_recommended}}">推荐</view>
        <view class="card-header">
          <text class="card-name">{{item.name}}</text>
          <text class="card-level">{{item.level_name}}</text>
        </view>
        <view class="card-body">
          <view class="card-price">
            <text class="price">¥{{item.price}}</text>
            <text class="original-price" wx:if="{{item.original_price > item.price}}">¥{{item.original_price}}</text>
          </view>
          <view class="card-info">
            <text class="duration">有效期{{item.duration_days}}天</text>
            <text class="bonus" wx:if="{{item.bonus_coins > 0}}">赠{{item.bonus_coins}}金币</text>
          </view>
        </view>
        <view class="card-btn">立即开通</view>
      </view>
    </view>
    <view class="empty" wx:if="{{cards.length === 0}}">
      <text>暂无可购买的套餐</text>
    </view>
  </view>
</view>

<!-- è¯¾ç¨‹æ”¶å…¥é¡µé¢ -->
<view class="page-container">
  <!-- æ”¶å…¥æ¦‚è§ˆ -->
  <view class="overview-card card">
    <view class="overview-header">
      <view class="overview-label">å¾…ç»“ç®—é‡‘é¢ï¼ˆé‡‘å¸ï¼‰</view>
      <view class="overview-value">{{incomeData.pending_amount || 0}}</view>
    </view>
    <view class="overview-stats flex">
      <view class="stat-item">
        <view class="stat-value">{{incomeData.pending_courses || 0}}</view>
        <view class="stat-label">å¾…ç»“ç®—è¯¾ç¨‹</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{incomeData.total_amount || 0}}</view>
        <view class="stat-label">ç´¯è®¡æ”¶å…¥</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{incomeData.total_courses || 0}}</view>
        <view class="stat-label">ç´¯è®¡è¯¾ç¨‹</view>
      </view>
    </view>
  </view>

  <!-- ç»“ç®—è¯´æ˜ -->
  <view class="tips-card card">
    <view class="tips-icon">ğŸ’¡</view>
    <view class="tips-content">
      <text>è¯¾ç¨‹æ”¶å…¥ = ç”¨æˆ·æ”¯ä»˜æ•™ç»ƒé¢„çº¦é‡‘é¢ - åœºé¦†é¢„çº¦é‡‘é¢</text>
      <text>ç»“ç®—æ–¹å¼ï¼šçº¿ä¸‹ç»“ç®—ï¼Œè¯·è”ç³»åœºé¦†ç®¡ç†å‘˜</text>
    </view>
  </view>

  <!-- ç­›é€‰æ  -->
  <view class="filter-bar card">
    <view class="filter-item {{currentFilter === 'all' ? 'active' : ''}}" bindtap="setFilter" data-filter="all">
      å…¨éƒ¨
    </view>
    <view class="filter-item {{currentFilter === 'pending' ? 'active' : ''}}" bindtap="setFilter" data-filter="pending">
      å¾…ç»“ç®—
    </view>
    <view class="filter-item {{currentFilter === 'settled' ? 'active' : ''}}" bindtap="setFilter" data-filter="settled">
      å·²ç»“ç®—
    </view>
  </view>

  <!-- æ”¶å…¥è®°å½•åˆ—è¡¨ -->
  <view class="income-list">
    <block wx:if="{{incomeList.length > 0}}">
      <view class="income-item card" wx:for="{{incomeList}}" wx:key="id">
        <view class="income-header flex flex-between">
          <view class="income-date">{{item.course_date}}</view>
          <view class="income-status {{item.status}}">{{item.status === 'pending' ? 'å¾…ç»“ç®—' : 'å·²ç»“ç®—'}}</view>
        </view>
        <view class="income-body">
          <view class="info-row flex flex-between">
            <text class="label">è¯¾ç¨‹æ—¶é—´</text>
            <text class="value">{{item.start_time}} - {{item.end_time}}</text>
          </view>
          <view class="info-row flex flex-between">
            <text class="label">å­¦å‘˜</text>
            <text class="value">{{item.member_name}}</text>
          </view>
          <view class="info-row flex flex-between">
            <text class="label">åœºé¦†</text>
            <text class="value">{{item.venue_name}}</text>
          </view>
        </view>
        <view class="income-footer flex flex-between">
          <view class="income-detail">
            <text class="detail-item">ç”¨æˆ·æ”¯ä»˜ï¼š{{item.total_price}}</text>
            <text class="detail-item">åœºé¦†è´¹ç”¨ï¼š{{item.venue_price}}</text>
          </view>
          <view class="income-amount">
            <text class="amount-label">æ”¶å…¥</text>
            <text class="amount-value">{{item.coach_income}}</text>
          </view>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && incomeList.length === 0}}">
      <image src="/assets/icons/empty.png" mode="aspectFit"></image>
      <text>æš‚æ— æ”¶å…¥è®°å½•</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>

<!-- é¢„çº¦è¯¦æƒ…é¡µé¢ -->
<view class="page-container">
  <!-- çŠ¶æ€å¡ç‰‡ -->
  <view class="status-card card {{reservation.status}}">
    <view class="status-icon">
      <text wx:if="{{reservation.status === 'pending'}}">â³</text>
      <text wx:elif="{{reservation.status === 'confirmed'}}">âœ“</text>
      <text wx:elif="{{reservation.status === 'in_progress'}}">â–¶</text>
      <text wx:elif="{{reservation.status === 'completed'}}">âœ“</text>
      <text wx:elif="{{reservation.status === 'cancelled'}}">âœ•</text>
    </view>
    <view class="status-text">{{reservation.statusText}}</view>
    <view class="status-desc" wx:if="{{reservation.status === 'confirmed'}}">
      è¯·å‡†æ—¶åˆ°è¾¾åœºé¦†ï¼Œå®Œæˆè¯¾ç¨‹åå‡ºç¤ºå®Œè¯¾ç 
    </view>
  </view>

  <!-- é¢„çº¦ä¿¡æ¯ -->
  <view class="info-card card">
    <view class="card-title">é¢„çº¦ä¿¡æ¯</view>
    <view class="info-list">
      <view class="info-item">
        <view class="label">é¢„çº¦æ—¥æœŸ</view>
        <view class="value">{{reservation.date}}</view>
      </view>
      <view class="info-item">
        <view class="label">é¢„çº¦æ—¶é—´</view>
        <view class="value">{{reservation.start_time}} - {{reservation.end_time}}</view>
      </view>
      <view class="info-item">
        <view class="label">é¢„çº¦åœºé¦†</view>
        <view class="value">{{reservation.venue_name}}</view>
      </view>
      <view class="info-item">
        <view class="label">è¯¾ç¨‹è´¹ç”¨</view>
        <view class="value price">{{reservation.coach_price}} é‡‘å¸</view>
      </view>
    </view>
  </view>

  <!-- å­¦å‘˜ä¿¡æ¯ -->
  <view class="info-card card">
    <view class="card-title">å­¦å‘˜ä¿¡æ¯</view>
    <view class="info-list">
      <view class="info-item">
        <view class="label">å­¦å‘˜å§“å</view>
        <view class="value">{{reservation.member_name}}</view>
      </view>
      <view class="info-item">
        <view class="label">è”ç³»æ–¹å¼</view>
        <view class="value clickable" bindtap="callPhone">
          {{reservation.member_phone}}
          <text class="call-icon">ğŸ“</text>
        </view>
      </view>
      <view class="info-item" wx:if="{{reservation.remark}}">
        <view class="label">å¤‡æ³¨</view>
        <view class="value">{{reservation.remark}}</view>
      </view>
    </view>
  </view>

  <!-- å®Œè¯¾ç  -->
  <view class="qrcode-card card" wx:if="{{reservation.status === 'confirmed' || reservation.status === 'in_progress'}}">
    <view class="card-title">å®Œè¯¾ç </view>
    <view class="qrcode-content">
      <canvas canvas-id="qrcode" class="qrcode-canvas"></canvas>
      <view class="qrcode-tip">è¯·å­¦å‘˜æ‰«ç ç¡®è®¤å®Œè¯¾</view>
    </view>
  </view>

  <!-- è¯„ä»·ä¿¡æ¯ -->
  <view class="info-card card" wx:if="{{reservation.status === 'completed' && reservation.rating}}">
    <view class="card-title">å­¦å‘˜è¯„ä»·</view>
    <view class="rating-content">
      <view class="rating-stars">
        <text wx:for="{{5}}" wx:key="*this" class="star {{index < reservation.rating ? 'active' : ''}}">â˜…</text>
      </view>
      <view class="rating-comment" wx:if="{{reservation.comment}}">{{reservation.comment}}</view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-bar" wx:if="{{reservation.status === 'pending'}}">
    <button class="btn-reject" bindtap="rejectReservation">æ‹’ç»é¢„çº¦</button>
    <button class="btn-confirm" bindtap="confirmReservation">ç¡®è®¤é¢„çº¦</button>
  </view>
</view>

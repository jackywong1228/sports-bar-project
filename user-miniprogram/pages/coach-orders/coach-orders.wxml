<!-- 我的订单页面 -->
<view class="page-container">
  <!-- 订单筛选 -->
  <view class="filter-bar card">
    <view class="filter-item {{currentFilter === 'all' ? 'active' : ''}}" bindtap="setFilter" data-filter="all">
      全部
    </view>
    <view class="filter-item {{currentFilter === 'pending' ? 'active' : ''}}" bindtap="setFilter" data-filter="pending">
      待支付
    </view>
    <view class="filter-item {{currentFilter === 'paid' ? 'active' : ''}}" bindtap="setFilter" data-filter="paid">
      已支付
    </view>
    <view class="filter-item {{currentFilter === 'completed' ? 'active' : ''}}" bindtap="setFilter" data-filter="completed">
      已完成
    </view>
  </view>

  <!-- 订单列表 -->
  <view class="order-list">
    <block wx:if="{{orderList.length > 0}}">
      <view class="order-item card" wx:for="{{orderList}}" wx:key="id">
        <view class="order-header flex flex-between">
          <view class="order-no">订单号：{{item.order_no}}</view>
          <view class="order-status {{item.status}}">{{item.statusText}}</view>
        </view>

        <view class="order-body">
          <view class="order-type">{{item.type_name}}</view>
          <view class="order-content">{{item.content}}</view>
          <view class="order-time">{{item.created_at}}</view>
        </view>

        <view class="order-footer flex flex-between">
          <view class="order-amount">
            <text class="amount-label">金额：</text>
            <text class="amount-value">{{item.amount}} 金币</text>
          </view>
          <view class="order-actions">
            <button class="action-btn" wx:if="{{item.status === 'pending'}}" bindtap="cancelOrder" data-id="{{item.id}}">
              取消
            </button>
            <button class="action-btn primary" wx:if="{{item.status === 'pending'}}" bindtap="payOrder" data-id="{{item.id}}">
              支付
            </button>
            <button class="action-btn" bindtap="viewDetail" data-id="{{item.id}}">
              详情
            </button>
          </view>
        </view>
      </view>
    </block>

    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{!loading && orderList.length === 0}}">
      <image src="/assets/icons/empty.png" mode="aspectFit"></image>
      <text>暂无订单</text>
    </view>

    <!-- 加载状态 -->
    <view class="loading" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>
  </view>
</view>

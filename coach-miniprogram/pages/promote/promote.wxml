<!-- æ¨å¹¿é¡µé¢ -->
<view class="page-container">
  <!-- æ¨å¹¿ç±»å‹åˆ‡æ¢ -->
  <view class="tab-bar card">
    <view class="tab-item {{currentTab === 'coach' ? 'active' : ''}}" bindtap="switchTab" data-tab="coach">
      æ•™ç»ƒæ¨å¹¿
    </view>
    <view class="tab-item {{currentTab === 'user' ? 'active' : ''}}" bindtap="switchTab" data-tab="user">
      å®¢æˆ·æ¨å¹¿
    </view>
  </view>

  <!-- æ¨å¹¿ç  -->
  <view class="qrcode-card card">
    <view class="qrcode-title">{{currentTab === 'coach' ? 'æ•™ç»ƒæ¨å¹¿ç ' : 'å®¢æˆ·æ¨å¹¿ç '}}</view>
    <view class="qrcode-wrapper">
      <canvas canvas-id="promoteQrcode" class="qrcode-canvas"></canvas>
    </view>
    <view class="qrcode-actions">
      <button class="action-btn" bindtap="saveQrcode">ä¿å­˜å›¾ç‰‡</button>
      <button class="action-btn primary" bindtap="shareQrcode">åˆ†äº«æ¨å¹¿</button>
    </view>
  </view>

  <!-- æ¨å¹¿è§„åˆ™ -->
  <view class="rules-card card">
    <view class="rules-title">æ¨å¹¿å¥–åŠ±è§„åˆ™</view>
    <view class="rules-content" wx:if="{{currentTab === 'coach'}}">
      <view class="rule-item">
        <view class="rule-icon">ğŸ</view>
        <view class="rule-text">
          <view class="rule-name">é‚€è¯·æ–°æ•™ç»ƒæ³¨å†Œ</view>
          <view class="rule-desc">æˆåŠŸé‚€è¯·æ–°æ•™ç»ƒåŠ å…¥ï¼ŒåŒæ–¹å„è·å¾— <text class="highlight">50é‡‘å¸</text></view>
        </view>
      </view>
      <view class="rule-item">
        <view class="rule-icon">ğŸ’°</view>
        <view class="rule-text">
          <view class="rule-name">æ–°æ•™ç»ƒäº§ç”Ÿæ”¶å…¥</view>
          <view class="rule-desc">æ–°æ•™ç»ƒé¦–æ¬¡äº§ç”Ÿæ”¶å…¥æ—¶ï¼Œæ‚¨é¢å¤–è·å¾— <text class="highlight">20ç§¯åˆ†</text></view>
        </view>
      </view>
    </view>
    <view class="rules-content" wx:else>
      <view class="rule-item">
        <view class="rule-icon">ğŸ</view>
        <view class="rule-text">
          <view class="rule-name">é‚€è¯·æ–°ç”¨æˆ·æ³¨å†Œ</view>
          <view class="rule-desc">æˆåŠŸé‚€è¯·æ–°ç”¨æˆ·åŠ å…¥ï¼ŒåŒæ–¹å„è·å¾— <text class="highlight">30é‡‘å¸</text></view>
        </view>
      </view>
      <view class="rule-item">
        <view class="rule-icon">ğŸ’°</view>
        <view class="rule-text">
          <view class="rule-name">æ–°ç”¨æˆ·æ¶ˆè´¹</view>
          <view class="rule-desc">æ–°ç”¨æˆ·é¦–æ¬¡æ¶ˆè´¹æ—¶ï¼Œæ‚¨é¢å¤–è·å¾— <text class="highlight">10ç§¯åˆ†</text></view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ¨å¹¿ç»Ÿè®¡ -->
  <view class="stats-card card">
    <view class="stats-title">æ¨å¹¿ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stats-item">
        <view class="stats-value">{{promoteStats.invite_count || 0}}</view>
        <view class="stats-label">é‚€è¯·äººæ•°</view>
      </view>
      <view class="stats-item">
        <view class="stats-value">{{promoteStats.success_count || 0}}</view>
        <view class="stats-label">æˆåŠŸæ³¨å†Œ</view>
      </view>
      <view class="stats-item">
        <view class="stats-value">{{promoteStats.reward_coin || 0}}</view>
        <view class="stats-label">è·å¾—é‡‘å¸</view>
      </view>
      <view class="stats-item">
        <view class="stats-value">{{promoteStats.reward_point || 0}}</view>
        <view class="stats-label">è·å¾—ç§¯åˆ†</view>
      </view>
    </view>
  </view>

  <!-- æ¨å¹¿è®°å½• -->
  <view class="record-card card">
    <view class="record-title">æ¨å¹¿è®°å½•</view>
    <view class="record-list" wx:if="{{promoteRecords.length > 0}}">
      <view class="record-item" wx:for="{{promoteRecords}}" wx:key="id">
        <view class="record-info">
          <view class="record-name">{{item.invitee_name}}</view>
          <view class="record-time">{{item.created_at}}</view>
        </view>
        <view class="record-status {{item.status}}">
          {{item.status === 'registered' ? 'å·²æ³¨å†Œ' : 'å·²æ¶ˆè´¹'}}
        </view>
        <view class="record-reward">+{{item.reward}}</view>
      </view>
    </view>
    <view class="empty-tip" wx:else>
      <text>æš‚æ— æ¨å¹¿è®°å½•</text>
    </view>
  </view>
</view>
